(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"178b":function(t,e,i){"use strict";i("4427")},4427:function(t,e,i){},"713b":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-layout",{attrs:{view:"HHh Lpr lFf"}},[i("application-bar",{attrs:{drawerBackground:t.leftDrawerOpen&&"mobile"===t.leftDrawerBehavior}}),i("q-header",{attrs:{bordered:""}},[i("div",{staticStyle:{height:"32px"}}),i("q-toolbar",{staticClass:"toolbar"},[i("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu"},on:{click:function(e){t.leftDrawerOpen=!t.leftDrawerOpen}}}),i("q-toolbar-title",{staticClass:"toolbar-title"},[t._v("\n          "+t._s(t.applicationTitle)+"\n        ")]),i("div",{staticClass:"toolbar-version non-selectable",attrs:{id:"version"},on:{click:t.showAboutDialog}},[t._v("v"+t._s(t.appVersion))]),i("div",{staticClass:"toolbar-commit non-selectable",attrs:{id:"commit"},on:{click:t.showAboutDialog}},[t._v("("+t._s(t.appCommit)+")")])],1)],1),i("left-drawer",{ref:"leftDrawer",attrs:{"current-tab":t.currentTab,"task-list":t.taskList},on:{setTab:t.setTab},model:{value:t.leftDrawerOpen,callback:function(e){t.leftDrawerOpen=e},expression:"leftDrawerOpen"}}),i("q-page-container",{staticClass:"bg-page text-page"},[i("keep-alive",{attrs:{include:"Player,Index"}},[i("router-view",{attrs:{currentTab:t.currentTab},on:{changeTab:t.setTab,updateTaskNum:t.updateTaskNum,updateLoadingStatus:t.updateLoadingStatus}})],1)],1)],1)},a=[],s=i("9224"),o=i("ebd6"),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-drawer",{ref:"qDrawer",staticClass:"bg-page text-page",attrs:{value:t.value,side:"left",bordered:"","show-if-above":"",breakpoint:t.breakpoint},on:{input:function(e){return t.$emit("input",e)}}},[i("q-list",{staticClass:"non-selectable bg-page text-page",style:{paddingTop:("mobile"===t.currentBehavior?32:8)+"px"}},t._l(t.essentialLinks,(function(e){return i("EssentialLink",t._b({key:e.title,attrs:{currentTab:t.currentTab,path:t.path},on:{trigger:function(e){return t.$emit("setTab",e)}}},"EssentialLink",e,!1))})),1),i("corner")],1)},c=[],l=(i("ddb0"),i("ddc3")),u=i.n(l),d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.children&&0!==t.children.length?t.children.length>0?i("div",[i("q-expansion-item",{attrs:{"expand-separator":"",icon:t.icon,label:t.title,caption:t.caption,"default-opened":""}},t._l(t.children,(function(e){return i("EssentialLink",t._b({key:e.title,attrs:{level:.5,currentTab:t.currentTab,path:t.path},on:{trigger:t.onTrigger}},"EssentialLink",e,!1))})),1)],1):t._e():i("div",[i("q-item",{staticClass:"bg-page text-page",attrs:{clickable:"","inset-level":t.level,active:t.isActive},on:{click:t.onClick}},[t.icon?i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:t.icon}})],1):t._e(),i("q-item-section",[i("q-item-label",[t._v(t._s(t.title))]),i("q-item-label",{attrs:{caption:""}},[t._v("\n        "+t._s(t.caption)+"\n      ")])],1),t.loading?i("q-item-section",{attrs:{side:""}},[i("q-circular-progress",{staticClass:"loading-progress",attrs:{indeterminate:"",size:"24px",thickness:.25,color:"primary","center-color":"transparent","track-color":"transparent"}})],1):t._e()],1)],1)},p=[],h={name:"EssentialLink",props:{title:{type:String,required:!0},caption:{type:String,default:""},link:{type:String,default:"#"},icon:{type:String,default:""},level:{type:Number,default:0},trigger:{type:String,default:""},currentTab:{type:String,default:""},path:{type:String,default:"/"},loading:{type:Boolean,default:!1},children:[]},computed:{isActive(){const t=this.path;return"/"!==t?t===this.link:this.currentTab===this.trigger}},methods:{onClick(){this.$emit("trigger",this.trigger),this.$router.push(this.link)},onTrigger(t){this.$emit("trigger",t)}}},m=h,g=(i("9268"),i("2877")),b=i("66e5"),f=i("4074"),v=i("0016"),w=i("0170"),_=i("58ea"),k=i("3b73"),$=i("eebe"),x=i.n($),C=Object(g["a"])(m,d,p,!1,null,"4169cb37",null),q=C.exports;x()(C,"components",{QItem:b["a"],QItemSection:f["a"],QIcon:v["a"],QItemLabel:w["a"],QCircularProgress:_["a"],QExpansionItem:k["a"]});var S=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"corner absolute-bottom non-selectable",on:{click:t.handleClick}},["signedIn"===t.$store.state.account.authState?i("corner-menu",{on:{signOut:t.signOut,invite:t.invite}}):t._e(),i("q-item",{staticStyle:{height:"65px"},attrs:{clickable:"",exact:!0}},[t.$store.state.account.authState?[i("q-item-section",{staticClass:"corner-avatar",attrs:{avatar:""}},[i("q-icon",{staticStyle:{opacity:"0.8"},attrs:{size:"36px",name:"account_circle"}})],1),i("q-item-section",[i("q-item-label",[t._v(t._s(t.title))]),i("q-item-label",{attrs:{caption:""}},[t._v(t._s(t.caption))])],1)]:[i("q-item-section",{staticClass:"corner-avatar",attrs:{avatar:""}},[i("q-spinner",{attrs:{size:"32px"}})],1),i("q-item-section",[i("span",{staticClass:"q-pr-lg"},[t._v(t._s(t.$t("account_loading")))])])]],2)],1)},y=[],z=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-menu",{attrs:{"auto-close":"","touch-position":"","transition-show":"jump-up","transition-hide":"jump-down"}},[i("q-list",{staticClass:"corner-menu__list",staticStyle:{"min-width":"160px"}},[i("q-item",{attrs:{clickable:""},on:{click:function(e){return t.$router.push("/account/settings")}}},[i("q-item-section",{attrs:{"data-cy":"account-settings-btn"}},[t._v("\n        "+t._s(t.$t("account_account_setting"))+"\n      ")])],1),i("q-separator"),t.showInvite?i("q-item",{attrs:{clickable:""},on:{click:function(e){return t.$emit("invite")}}},[i("q-item-section",{attrs:{"data-cy":"invite-btn"}},[t._v(t._s(t.$t("account_invitation")))])],1):t._e(),i("q-separator"),i("q-item",{attrs:{clickable:""},on:{click:function(e){return t.$emit("signOut")}}},[i("q-item-section",{attrs:{"data-cy":"sign-out-btn"}},[t._v(t._s(t.$t("account_sign_out"))+"\n      ")])],1)],1)],1)},L=[],T={name:"CornerMenu",computed:{showInvite(){return this.$store.state.account.invitationCode&&this.$store.state.account.invitationCode.findIndex((t=>0===t.invitation_state))>=0}}},Q=T,I=i("4e73"),B=i("1c1c"),O=i("eb85"),D=Object(g["a"])(Q,z,L,!1,null,null,null),A=D.exports;x()(D,"components",{QMenu:I["a"],QList:B["a"],QItem:b["a"],QItemSection:f["a"],QSeparator:O["a"]});var E=i("48f4"),M={name:"Corner",components:{CornerMenu:A},computed:{info(){return"signedIn"===this.$store.state.account.authState?this.$store.getters.accountUserInfo:null},title(){return this.info?this.info.nickname?this.info.nickname:this.info.emailVerified?this.info.email.split("@")[0]:this.info.phoneNumberVerified?this.info.phoneNumber:"???":this.$t("account_want_to_join")},caption(){return this.info?`Lv. ${this.info.accountLevel}`:this.$t("account_sign_up_now")}},methods:{handleClick(){const t=this.$store.state.account.authState;t&&"signedIn"!==t&&this.$amplify.showSignedOutDialog()},signOut(){E["b"].showPositive("signed_out"),E["a"].updateState("signedOut"),(this.$route.path.startsWith("/account")||this.$route.path.startsWith("/credits"))&&this.$router.push("/"),E["a"].signOut().catch((()=>{}))},invite(){this.$router.push({path:"/account/settings",query:{call:"invite"}})}}},N=M,j=(i("fd61"),i("0d59")),P=Object(g["a"])(N,S,y,!1,null,"2e57ea3c",null),W=P.exports;x()(P,"components",{QItem:b["a"],QItemSection:f["a"],QIcon:v["a"],QItemLabel:w["a"],QSpinner:j["a"]});const V=!u.a.prerelease(s["a"]);var H={name:"LeftDrawer",components:{EssentialLink:q,Corner:W},props:{value:Boolean,currentTab:String,taskList:Array},data(){return{breakpoint:1080,currentBehavior:null,resizeListener:null,path:"/"}},watch:{$route(t){this.path=t.path}},computed:{accountSettingItem(){return"signedIn"!==this.$store.state.account.authState?[]:[{title:this.$t("account_account_setting"),icon:"account_circle",link:"/account/settings",caption:this.$t("account_setting_caption")}]},essentialLinks(){const t=[{title:this.$t("home"),caption:this.$t("home_caption"),icon:"home",link:"/",children:this.taskList},{title:this.$t("player"),caption:this.$t("player_caption"),icon:"play_circle_filled",link:"/player"},{title:this.$t("credits"),caption:this.$t("credits_caption"),icon:"savings",link:"/credits"},{title:this.$t("settings"),caption:this.$t("settings_caption"),icon:"settings",children:[...this.accountSettingItem,{title:this.$t("basic_setting"),icon:"assignment",link:"/settings",caption:this.$t("basic_caption")},{title:this.$t("advanced"),icon:"build",link:"/advancedSettings",caption:this.$t("advanced")}]}];try{V&&t.push({title:this.$t("development"),caption:this.$t("development_caption"),icon:"developer_mode",link:"/development"})}catch(e){}return t}},methods:{onWindowResize(){this.updateCurrentBehavior()},updateCurrentBehavior(){const t=window.innerWidth<=this.breakpoint-8?"mobile":"desktop";t!==this.currentBehavior&&(this.currentBehavior=t)}},created(){this.updateCurrentBehavior(),this.resizeListener=t=>this.onWindowResize(t),window.addEventListener("resize",this.resizeListener)},beforeDestroy(){window.removeEventListener("resize",this.resizeListener)}},J=H,R=i("9404"),F=Object(g["a"])(J,r,c,!1,null,null,null),U=F.exports;x()(F,"components",{QDrawer:R["a"],QList:B["a"]});var G=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.showAppBar?i("q-bar",{staticClass:"application-bar"},["mac"===t.env?[i("div",{staticClass:"full-height q-pt-xs col-grow",staticStyle:{"margin-left":"0","margin-right":"-8px"}},[i("div",{staticClass:"draggable full-height"})]),i("div",{staticClass:"absolute-left full-width full-height row flex-center",staticStyle:{"pointer-events":"none"}},[i("div",{staticClass:"text-weight-bold non-selectable"},[t._v("Alphabiz")])])]:t._e(),["win","linux"].includes(t.env)?[i("q-img",{staticClass:"application-bar-icon",class:t.drawerBackground?"drawer-content":"",attrs:{src:t.abIcon,width:"18px",height:"18px"}}),i("div",{staticClass:"application-bar-title q-ml-md q-pr-md non-selectable",class:t.drawerBackground?"drawer-content":"",staticStyle:{"font-size":"0.8rem"}},[t._v("\n      Alphabiz\n    ")]),i("div",{staticClass:"full-height q-pt-xs col-grow",staticStyle:{"margin-left":"0","margin-right":"-8px"}},[i("div",{staticClass:"draggable full-height"})]),i("div",{staticClass:"full-height no-draggable flex-center row",staticStyle:{"margin-right":"-12px","margin-top":"-4px"}},t._l([{icon:"fas fa-window-minimize",handleClick:t.minimize},{icon:t.maximizeIcon,handleClick:t.maximize},{icon:"fas fa-times",handleClick:t.close,clz:["window-close-button"]}],(function(t,e){return i("q-btn",{key:e,class:["no-border-radius"].concat(t.clz||[]),attrs:{dense:"",flat:"",size:"xs",padding:"12px 17px 8px 17px",icon:t.icon},on:{click:t.handleClick}})})),1)]:t._e()],2):t._e()},K=[];const X=i("ed08").isElectron();var Y={name:"ApplicationBar",props:{drawerBackground:Boolean},data(){return{showAppBar:X,showMenu:!1,abIcon:i("a4a1"),env:null,windowControl:null,isMaximized:!1}},created(){if(!X)return;Promise.resolve().then(i.t.bind(null,"bdb9",7)).then((({ipcRenderer:t})=>{this.windowControl=e=>t.sendSync("app_window_control",e),this.isMaximized=this.windowControl("isMaximized")}));const t=navigator.userAgent.toLowerCase();console.log(t);const e=/macintosh|mac os x/i.test(t);this.env=e?"mac":"win"},computed:{maximizeIcon(){return this.isMaximized?"far fa-window-restore":"far fa-window-maximize"}},methods:{minimize(){this.windowControl("minimize")},maximize(){this.windowControl(this.isMaximized?"unmaximize":"maximize"),this.isMaximized=this.windowControl("isMaximized")},close(){this.windowControl("close")}}},Z=Y,tt=(i("178b"),i("d847")),et=i("9c40"),it=i("068f"),nt=Object(g["a"])(Z,G,K,!1,null,"35ca70d4",null),at=nt.exports;x()(nt,"components",{QBar:tt["a"],QBtn:et["a"],QImg:it["a"]});var st={name:"MainLayout",components:{ApplicationBar:at,LeftDrawer:U},data(){return{currentTab:"downloading",leftDrawerOpen:!1,appVersion:s["a"],appCommit:o["a"],taskNum:{downloading:0,uploading:0,downloaded:0},loadingStatus:{uploading:!1}}},computed:{leftDrawerBehavior(){return this.$refs.leftDrawer.currentBehavior},taskList(){return[{title:this.$t("downloading")+` (${this.taskNum.downloading})`,icon:"file_download",link:"/",trigger:"downloading"},{title:this.$t("uploading")+` (${this.taskNum.uploading})`,icon:"file_upload",link:"/",trigger:"uploading",loading:this.loadingStatus.uploading},{title:this.$t("downloaded")+` (${this.taskNum.downloaded})`,icon:"done",link:"/",trigger:"downloaded"}]},applicationTitle(){const t={Player:"player",Credits:"credits",AccountSettings:"account_account_setting",BasicSettings:"basic_setting",AdvancedSettings:"advancedSettings",Development:"development"},e=this.$route.name;return e&&t[e]?this.$t(t[e]):"/"===this.$route.path?this.$t(this.currentTab):"Alphabiz"}},methods:{setTab(t){t&&(this.currentTab=t)},updateTaskNum(t){this.taskNum=t,Object.assign(this.taskNum,t)},updateLoadingStatus(t){Object.assign(this.loadingStatus,t)},showAboutDialog(){const t=this.$root.$children[0];t.$refs.about.about_visible()}}},ot=st,rt=(i("89d3"),i("4d5a")),ct=i("e359"),lt=i("65c6"),ut=i("6ac5"),dt=i("09e3"),pt=i("7ff0"),ht=Object(g["a"])(ot,n,a,!1,null,null,null);e["default"]=ht.exports;x()(ht,"components",{QLayout:rt["a"],QHeader:ct["a"],QToolbar:lt["a"],QBtn:et["a"],QToolbarTitle:ut["a"],QPageContainer:dt["a"],QFooter:pt["a"],QDrawer:R["a"]})},"89d3":function(t,e,i){"use strict";i("e87e")},9268:function(t,e,i){"use strict";i("db99")},d410:function(t,e,i){},db99:function(t,e,i){},e87e:function(t,e,i){},ebd6:function(t){t.exports=JSON.parse('{"a":"5cf1094"}')},fd61:function(t,e,i){"use strict";i("d410")}}]);