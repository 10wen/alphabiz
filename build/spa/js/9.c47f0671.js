(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{"0e78":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=this,s=e.$createElement,i=e._self._c||s;return i("q-page",{attrs:{padding:""}},[i("article",{staticClass:"q-pb-lg"},[i("div",[i("div",{staticClass:"configuration-variable q-pt-sm row "},[i("div",{staticClass:"col-4 m-t-4 "},[i("span",{staticClass:"label-name"},[e._v(e._s(this.$t("autoUpdate")))])]),i("div",{staticClass:"col-8 row"},[i("div",{staticClass:"col-12"},[i("q-checkbox",{staticClass:"rox-font",attrs:{size:"xs",label:this.$t("autoCheckUpdate")},model:{value:e.settings.autoCheckUpdate,callback:function(t){e.$set(e.settings,"autoCheckUpdate",t)},expression:"settings.autoCheckUpdate"}})],1),i("div",{staticClass:"col-12 text-grey"},[i("small",[e._v(e._s(e.$t("last_check_at"))+": "+e._s(e.lastUpdateCheckTimeString))])])]),i("div",{staticClass:"col-4 q-mt-sm"},[i("span",{staticClass:"label-name"},[e._v(e._s(e.$t("update_channel")))])]),i("div",{staticClass:"col-8 row q-mt-xs"},[i("q-select",{attrs:{options:e.availableVersions,outlined:"",dense:"",autocomplete:"stable","emit-value":""},model:{value:e.settings.versionChannel,callback:function(t){e.$set(e.settings,"versionChannel",t)},expression:"settings.versionChannel"}})],1)]),i("div",{staticClass:"configuration-variable q-pt-sm row"}),i("div",{staticClass:"configuration-variable q-bt-sm row"},[i("div",{staticClass:"col-4 m-t-8"},[i("span",{staticClass:"label-name col"},[e._v(e._s(this.$t("trackerService")))])]),i("div",{staticClass:"col-8 row"},[i("div",{staticClass:"col-10 m-b-8 m-l-10"},[i("q-select",{attrs:{outlined:"","use-input":"","use-chips":"",multiple:"","input-debounce":"0",options:e.trackerSourceOptions[0].options,dense:""},model:{value:e.settings.trackerSource,callback:function(t){e.$set(e.settings,"trackerSource",t)},expression:"settings.trackerSource"}})],1),i("div",{staticClass:"col-10 m-l-10 m-t-8 trackerArea"},[i("q-input",{attrs:{rows:"3","auto-complete":"off",placeholder:"Tracker Sources",outlined:"",type:"textarea"},model:{value:e.settings.trackerBt,callback:function(t){e.$set(e.settings,"trackerBt",t)},expression:"settings.trackerBt"}})],1),i("div",{staticClass:"col-12 m-l-10 row m-b-8 lookUp"},[i("div",{staticClass:"col-5 m-t-4 checkOutGroup"},[i("span",{staticClass:"wd"},[e._v(e._s(this.$t("recommendUse"))+"ï¼š")]),i("a",{staticClass:"checkDocument m-l-10",attrs:{target:"_blank",href:"https://github.com/ngosang/trackerslist"}},[e._v("ngosang/trackerslist\n                "),i("q-icon",{attrs:{size:"12",name:"flag"}})],1),i("a",{staticClass:"checkDocument m-l-10",attrs:{target:"_blank",href:"https://github.com/XIU2/TrackersListCollection"}},[e._v("XIU2/TrackersListCollection\n                "),i("q-icon",{attrs:{size:"12",name:"flag"}})],1)])]),i("div",{staticClass:"col-12 m-b-8"},[i("q-checkbox",{staticClass:"rox-font",attrs:{size:"xs",label:this.$t("autoUpdateTrackerServiceList")},model:{value:e.settings.autoUpdateTrackerServiceList,callback:function(t){e.$set(e.settings,"autoUpdateTrackerServiceList",t)},expression:"settings.autoUpdateTrackerServiceList"}})],1),i("div",{staticClass:"col-12 m-l-10 manual-update"},[i("q-btn",{attrs:{color:"primary",label:e.$t("manualUpdateTracker"),loading:e.updatingTracker,disable:e.updatingTracker},on:{click:e.updateTracker}})],1),i("div",{staticClass:"col-12 m-t-10 m-l-10 updatedate"},[e._v("\n            "+e._s(e.$t("last_check_at"))+": "+e._s(e.lastTrackerUpdateTime)+"\n          ")])])]),i("div",{staticClass:"configuration-variable q-pt-sm row",attrs:{id:"bind-ports"}},[i("div",{staticClass:"col-4 m-t-8"},[i("span",{staticClass:"label-name col"},[e._v(e._s(this.$t("listenPort")))])]),i("div",{staticClass:"col-8 row"},[i("div",{staticClass:"col-12 m-b-4 m-l-10"},[e._v("\n            "+e._s(this.$t("BTlistenPort"))+"\n          ")]),i("div",{staticClass:"col-6 m-b-8 m-l-10"},[i("div",[i("q-input",{attrs:{outlined:"",dense:!0},model:{value:e.settings.BTlistenPort,callback:function(t){e.$set(e.settings,"BTlistenPort",e._n(t))},expression:"settings.BTlistenPort"}})],1)]),i("div",{staticClass:"server_box"},[i("q-icon",{staticClass:"server-icon cursor-pointer",attrs:{size:"sm",color:"#909399","text-color":"#dcdfe6",outline:"",name:"casino"},on:{click:function(){return t.settings.BTlistenPort=t.randomPort()}}})],1),i("div",{staticClass:"col-12 m-b-4 m-l-10"},[e._v("\n            "+e._s(this.$t("DHTlistenPort"))+"\n          ")]),i("div",{staticClass:"col-6 m-b-8 m-l-10"},[i("div",[i("q-input",{attrs:{outlined:"",dense:!0},model:{value:e.settings.DHTlistenPort,callback:function(t){e.$set(e.settings,"DHTlistenPort",e._n(t))},expression:"settings.DHTlistenPort"}})],1)]),i("div",{staticClass:"server_box"},[i("q-icon",{staticClass:"server-icon cursor-pointer",attrs:{size:"sm",color:"#909399","text-color":"#dcdfe6",outline:"",name:"casino"},on:{click:function(){return t.settings.DHTlistenPort=t.randomPort()}}})],1)])]),i("div",{staticClass:"configuration-variable q-pt-sm row",attrs:{id:"associations"}},[i("div",{staticClass:"col-4 m-b-8"},[i("span",{staticClass:"label-name col"},[e._v(e._s(this.$t("downloadAgreement")))])]),i("div",{staticClass:"col-8 row"},[i("div",{staticClass:"col-12 m-b-4"},[e._v("\n            "+e._s(this.$t("setDefaultClientForFollowingProtocols"))+"\n          ")]),i("div",{staticClass:"col-12 "},[i("q-toggle",{attrs:{label:this.$t("magnetUrl")+"[ magnet:// ]"},model:{value:e.settings.bindMagnetUrl,callback:function(t){e.$set(e.settings,"bindMagnetUrl",t)},expression:"settings.bindMagnetUrl"}})],1),e.isWindows?[i("div",{staticClass:"col-12"},[i("q-toggle",{attrs:{label:this.$t("torrent_file")+"[ .torrent ]"},model:{value:e.settings.bindTorrentFile,callback:function(t){e.$set(e.settings,"bindTorrentFile",t)},expression:"settings.bindTorrentFile"}})],1),i("div",{staticClass:"col-12"},[i("q-toggle",{attrs:{label:this.$t("video_file")+"[ .mkv .avi ... ]"},model:{value:e.settings.bindVideoFile,callback:function(t){e.$set(e.settings,"bindVideoFile",t)},expression:"settings.bindVideoFile"}})],1),i("div",{staticClass:"col-12"},[i("q-toggle",{attrs:{label:this.$t("audio_file")+"[ .mp3 .wav ... ]"},model:{value:e.settings.bindAudioFile,callback:function(t){e.$set(e.settings,"bindAudioFile",t)},expression:"settings.bindAudioFile"}})],1)]:e._e()],2)])])]),i("q-footer",{class:e.$q.dark.isActive?"bg-dark":"bg-white",attrs:{bordered:""}},[i("div",{staticClass:"row q-py-sm q-px-sm"},[i("q-btn",{staticClass:"q-mx-xs",attrs:{color:"primary",loading:e.loading,label:e.$t("submit")},on:{click:e.submit}}),i("q-btn",{staticClass:"q-mx-xs",attrs:{color:e.$q.dark.isActive?"grey-9":"grey-3","text-color":e.$q.dark.isActive?"grey-3":"grey-9",loading:e.loading,label:e.$t("discard")},on:{click:e.discard}}),i("q-space"),i("q-btn",{staticClass:"q-mx-xs",attrs:{color:e.$q.dark.isActive?"red-10":"red-8",label:e.$t("reset")},on:{click:e.resetSettings}})],1)])],1)},a=[],n=(s("a79d"),s("0c6d"));const l={aria2:"aria2/1.35.0",transmission:"Transmission/2.94",chrome:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.93 Safari/537.36",du:"netdisk;6.0.0.12;PC;PC-Windows;10.0.16299;WindowsBaiduYunGuanJia"},r="https://raw.githubusercontent.com/ngosang/trackerslist/master/trackers_best.txt",o="https://raw.githubusercontent.com/ngosang/trackerslist/master/trackers_best_ip.txt",c="https://raw.githubusercontent.com/ngosang/trackerslist/master/trackers_all.txt",d="https://raw.githubusercontent.com/ngosang/trackerslist/master/trackers_all_ip.txt",g="https://cdn.jsdelivr.net/gh/ngosang/trackerslist/trackers_best.txt",u="https://cdn.jsdelivr.net/gh/ngosang/trackerslist/trackers_best_ip.txt",h="https://cdn.jsdelivr.net/gh/ngosang/trackerslist/trackers_all.txt",p="https://cdn.jsdelivr.net/gh/ngosang/trackerslist/trackers_all_ip.txt",b="https://raw.githubusercontent.com/XIU2/TrackersListCollection/master/best.txt",m="https://raw.githubusercontent.com/XIU2/TrackersListCollection/master/all.txt",v="https://raw.githubusercontent.com/XIU2/TrackersListCollection/master/http.txt",k="https://cdn.jsdelivr.net/gh/XIU2/TrackersListCollection/best.txt",_="https://cdn.jsdelivr.net/gh/XIU2/TrackersListCollection/all.txt",C="https://cdn.jsdelivr.net/gh/XIU2/TrackersListCollection/http.txt",f=[{label:"ngosang/trackerslist",options:[{value:r,label:"ngosang_best",cdn:!1},{value:o,label:"ngosang_best_ip",cdn:!1},{value:c,label:"ngosang_all",cdn:!1},{value:d,label:"ngosang_all_ip",cdn:!1},{value:g,label:"ngosang_best",cdn:!0},{value:u,label:"ngosang_best_ip",cdn:!0},{value:h,label:"ngosang_all",cdn:!0},{value:p,label:"ngosang_all_ip",cdn:!0}]},{label:"XIU2/TrackersListCollection",options:[{value:b,label:"xiu2_best",cdn:!1},{value:m,label:"xiu2_all",cdn:!1},{value:v,label:"xiu2_http",cdn:!1},{value:k,label:"xiu2_best",cdn:!0},{value:_,label:"xiu2_all",cdn:!0},{value:C,label:"xiu2_http",cdn:!0}]}];var $=s("2ef0"),T=s("849b");const x=t=>{const{autoCheckUpdate:e,useProxyService:s,trackerSource:i,trackerBt:a,autoUpdateTrackerServiceList:n,listenPort:l,BTlistenPort:r,DHTlistenPort:o,bindMagnetUrl:c,bindTorrentFile:d,bindVideoFile:g,bindAudioFile:u,userAgent:h,RPCauthorizationkey:p,downloadDirectory:b,versionChannel:m}=t,v={autoCheckUpdate:e,useProxyService:s,trackerSource:i,trackerBt:a,autoUpdateTrackerServiceList:n,listenPort:l,BTlistenPort:r,DHTlistenPort:o,bindMagnetUrl:c,bindTorrentFile:d,bindVideoFile:g,bindAudioFile:u,userAgent:h,RPCauthorizationkey:p,downloadDirectory:b,versionChannel:m};return v};var w={name:"Settings",data(){const t=x(this.$store.state.setting.settings),e=Object($["cloneDeep"])(t);return{isWindows:navigator.userAgent.includes("Windows NT"),settings:t,settingsOriginal:e,trackerSourceOptions:f,isPwd:!0,updatingTracker:!1,availableVersions:["stable","nightly"],loading:!1}},computed:{lastUpdateCheckTimeString(){return new Date(this.$store.getters.getSettings.lastUpdateCheckTime).toLocaleString(this.$i18n.locale)},lastTrackerUpdateTime(){return new Date(this.$store.getters.getSettings.trackerLastUpdateTime).toLocaleString(this.$i18n.locale)}},methods:{async clear_select_directory(){await Object(n["a"])("set_setting",this.settings)},async select_directory(){const t=await Object(n["a"])("select_directory");t.filePaths.length>1?this.$q.notify(this.$t("not_length")):this.settings.downloadDirectory=t.filePaths[0]},selectUserAgent(t){const e=l[t];e&&(this.settings.userAgent=e)},syncSettingsConfig(){this.$store.dispatch("fetchSettings",this.settings).then((t=>{this.settings=x(t),this.settingsOriginal=Object($["cloneDeep"])(this.settings)}))},async submit(){this.loading=!0,this.$store.dispatch("set",this.settings).then((()=>{this.syncSettingsConfig(),this.$q.notify({message:this.$t("preferences_set_successfully"),position:"bottom-right",type:"positive",timeout:3e3})})).catch((()=>{this.$q.notify({message:this.$t("preferences_set_fail"),position:"bottom-right",type:"negative",timeout:3e3})})).finally((()=>{T["a"].emit("update_torrent_settings",{dhtPort:this.settings.DHTlistenPort,torrentPort:this.settings.BTlistenPort}),this.loading=!1}))},async updateTracker(){this.updatingTracker=!0;const t=await Object(n["a"])("update_tracker",this.settings.trackerSource);t&&t.data&&(t.data.length&&(this.settings.trackerBt=t.data.join("\n")),t.failure.length?this.$q.notify({message:this.$t("manualUpdateFail"),caption:t.failure.join("\n")}):this.$q.notify({message:this.$t("manualUpdateSuccess")}),t.success.length&&(this.updateTime=t.time)),this.updatingTracker=!1},discard(){this.syncSettingsConfig()},resetSettings(){this.$q.dialog({title:this.$t("reset"),message:this.$t("reset_all_settings"),ok:{textColor:"red",color:"unset",flat:!0,label:this.$t("reset")},cancel:{textColor:"unset",color:"unset",flat:!0,label:this.$t("not_now")}}).onOk((()=>{this.$store.dispatch("resetSettings").then((t=>{this.$i18n.locale=t.language,this.$q.notify({message:this.$t("preferences_resetted"),position:"bottom-right",type:"positive",timeout:3e3})}))}))},randomPort(){const t=[this.settings.BTlistenPort,this.settings.DHTlistenPort];let e=t[0];while(t.includes(e))e=Math.floor(5e3*Math.random())+17e3;return e},simulateProgress(t){this[`loading${t}`]=!0,setTimeout((()=>{this[`loading${t}`]=!1}),3e3)}},destroyed(){this.discard()},mounted(){if(this.syncSettingsConfig(),this.$router.currentRoute.hash){const t=document.querySelector(this.$router.currentRoute.hash);t&&t.scrollIntoView()}}},q=w,y=(s("e6ea"),s("2877")),U=s("9989"),S=s("8f8e"),P=s("ddd8"),F=s("9564"),D=s("9c40"),L=s("05c0"),A=s("27f9"),B=s("0016"),j=s("7ff0"),I=s("2c91"),O=s("8572"),M=s("eebe"),Q=s.n(M),H=Object(y["a"])(q,i,a,!1,null,"0d4ce267",null);e["default"]=H.exports;Q()(H,"components",{QPage:U["a"],QCheckbox:S["a"],QSelect:P["a"],QToggle:F["a"],QBtn:D["a"],QTooltip:L["a"],QInput:A["a"],QIcon:B["a"],QFooter:j["a"],QSpace:I["a"],QField:O["a"]})},b578:function(t,e,s){},e6ea:function(t,e,s){"use strict";s("b578")}}]);