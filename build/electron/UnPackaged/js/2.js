(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"0204":function(t,e,s){"use strict";s("af17")},"0c6d":function(t,e,s){"use strict";s("ddb0");var n=s("ed08");let a={on:()=>{},send:()=>{}};a=s("34bb").ipcRenderer;const i={};a.on("send_result",((t,{eventName:e,data:s})=>{i[e][0](s)})),a.on("send_error",((t,{eventName:e,data:s})=>{i[e][1](s)})),a.on("about-dialog",(()=>{n["Bus"].$emit("CALL_ABOUT")}));e["a"]=(t,...e)=>new Promise(((s,n)=>{e.length?a.send(t,...e):a.send(t),i[t]=[s,n]}))},"11a5":function(t,e,s){},"1a23":function(t,e,s){"use strict";s("e9df")},"284d":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-12 row"},[s("q-input",{staticClass:"q-mt-sm",attrs:{hint:t.label,rules:t.rules,type:"number",dense:"",outlined:""},on:{blur:t.onBlur},scopedSlots:t._u([t.dice?{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"casino"},on:{click:t.setRandom}},[s("q-tooltip",[t._v(t._s(t.$t("random")))])],1)]},proxy:!0}:null],null,!0),model:{value:t.number,callback:function(e){t.number=t._n(e)},expression:"number"}})],1)},a=[],i=(s("ddb0"),{props:{value:Number,keyName:String,label:String,dice:{type:Array,required:!1},rules:Array},computed:{number:{get(){return this.value},set(t){this.onChange(t)}},minValue(){return Array.isArray(this.dice)?this.dice[0]:1}},methods:{isValid(t){for(const e of this.rules)if("function"===typeof e){const s=e(t);if(!0!==s)return!1}return!0},onChange(t){if(""===t)return this.$emit("change",this.keyName,this.minValue);this.$emit("change",this.keyName,t)},onBlur(){this.isValid(this.value)||this.$emit("change",this.keyName,this.minValue)},setRandom(){if(!this.dice||!this.dice.length)return;const[t,e]=this.dice;return this.onChange(Math.floor(Math.random()*(e-t)+t))}}}),r=i,l=s("2877"),o=s("27f9"),c=s("0016"),u=s("05c0"),h=s("eebe"),g=s.n(h),d=Object(l["a"])(r,n,a,!1,null,null,null);e["a"]=d.exports;g()(d,"components",{QInput:o["a"],QIcon:c["a"],QTooltip:u["a"]})},"28b2":function(t,e,s){"use strict";s("ea55")},"2d04":function(t,e,s){"use strict";var n=s("1b40"),a=s("2b0e"),i=s("0613"),r=s("ff52"),l=s("0967"),o=s("2a19"),c=s("436b"),u=s("8847"),h=s("ed08"),g=s("16ed"),d=s("a76d"),b=function(t,e,s,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,s):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(t,e,s,n);else for(var l=t.length-1;l>=0;l--)(a=t[l])&&(r=(i<3?a(r):i>3?a(e,s,r):a(e,s))||r);return i>3&&r&&Object.defineProperty(e,s,r),r},p=function(t,e,s,n){function a(t){return t instanceof s?t:new s((function(e){e(t)}))}return new(s||(s=Promise))((function(s,i){function r(t){try{o(n.next(t))}catch(e){i(e)}}function l(t){try{o(n["throw"](t))}catch(e){i(e)}}function o(t){t.done?s(t.value):a(t.value).then(r,l)}o((n=n.apply(t,e||[])).next())}))};const m=!!l["b"].is.electron;let v=null;m&&(v=s("34bb").ipcRenderer);let f=class extends a["a"]{constructor(){super(...arguments),this.loading=!1,this.changes=new Map,this.settings={},this.languages=g["a"],this.changed=!1}get language(){return this.settings.language}set language(t){u["b"].locale=t,m&&v.send("change-app-i18n",t),this.storeChange("language",t)}t(t,...e){return u["b"].t(t,...e)}resetChange(){this.changes.clear(),this.changed=!1,this.loading=!1}storeChange(t,e){console.log(`[Setting] Set ${t} to value:`,e),this.changes.set(t,e),this.$set(this.settings,t,e),this.changed=!0}notify(t){o["a"].create({message:t,position:"bottom-right",type:"positive",timeout:2e3})}syncSetting(){return p(this,void 0,void 0,(function*(){const t=yield i["a"].dispatch("fetchSettings");this.settings=Object(h["deepClone"])(t);const e=t.darkMode===d["a"].system;return r["a"].set(e?"auto":t.darkMode===d["a"].dark),this.language=t.language,t}))}onSubmit(){return p(this,void 0,void 0,(function*(){if(!this.changes.size)return;this.loading=!0;const t=Object.fromEntries(this.changes);yield i["a"].dispatch("set",t),yield this.syncSetting(),this.resetChange(),this.notify(this.t("preferences_set_successfully"))}))}onDiscard(){return p(this,void 0,void 0,(function*(){this.changed&&(yield this.syncSetting(),this.resetChange())}))}onReset(){return p(this,void 0,void 0,(function*(){c["a"].create({title:this.t("reset"),message:this.t("reset_all_settings"),ok:{textColor:"red",color:"unset",flat:!0,label:this.t("reset")},cancel:{textColor:"unset",color:"unset",flat:!0,label:this.t("not_now")}}).onOk((()=>p(this,void 0,void 0,(function*(){this.loading=!0,yield i["a"].dispatch("resetSettings"),yield this.syncSetting(),this.resetChange(),this.notify(this.t("preferences_resetted"))}))))}))}created(){this.settings=Object(h["deepClone"])(i["a"].getters.settings)}beforeDestroy(){return this.onDiscard()}beforeRouteLeave(t,e,s){if(!this.changed)return s();c["a"].create({title:this.t("change_not_save"),message:this.t("discard_all_changes"),ok:this.t("stay_in_page"),cancel:this.t("discard"),persistent:!0}).onOk((()=>s(!1))).onCancel((()=>s()))}};f=b([n["a"]],f),e["a"]=f},"2e92":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-select",{staticClass:"setting-select",attrs:{value:t.displayLabel,options:t.options,label:t.label,outlined:"",dense:"","emit-value":"","data-cy":"select-direct"},on:{input:t.emitChange}})},a=[],i=(s("ddb0"),{model:{prop:"language",event:"change"},props:{language:String,options:Array,label:String},computed:{displayLabel(){for(const t of this.options)if(t.value===this.language)return t.label;return this.language}},methods:{emitChange(t){this.$emit("change",t)}}}),r=i,l=(s("82c7"),s("2877")),o=s("ddd8"),c=s("eebe"),u=s.n(c),h=Object(l["a"])(r,n,a,!1,null,"afe32f44",null);e["a"]=h.exports;u()(h,"components",{QSelect:o["a"]})},"4a61":function(t,e,s){},"6b28":function(t,e,s){"use strict";s("4a61")},"6bad":function(t,e,s){"use strict";s("8adb")},"76d3":function(t,e,s){},"82c7":function(t,e,s){"use strict";s("11a5")},"8adb":function(t,e,s){},9384:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-12"},[s("q-checkbox",{staticClass:"q-mt-sm",attrs:{value:t.value,label:t.label,dense:""},on:{input:t.onChange}},[t.tooltip?s("q-tooltip",[t._v(t._s(t.tooltip))]):t._e()],1)],1)},a=[],i={props:{value:Boolean,label:String,keyName:String,tooltip:{type:String,required:!1}},methods:{onChange(t){this.$emit("change",this.keyName,t)}}},r=i,l=s("2877"),o=s("8f8e"),c=s("05c0"),u=s("eebe"),h=s.n(u),g=Object(l["a"])(r,n,a,!1,null,null,null);e["a"]=g.exports;h()(g,"components",{QCheckbox:o["a"],QTooltip:c["a"]})},a76d:function(t,e,s){"use strict";var n;s.d(e,"a",(function(){return n})),function(t){t["system"]="system",t["light"]="light",t["dark"]="dark"}(n||(n={}))},af17:function(t,e,s){},ba12:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{attrs:{padding:""}},[s("SettingBlock",{directives:[{name:"show",rawName:"v-show",value:t.showDevOptions,expression:"showDevOptions"}],attrs:{label:"DevTools"}},[s("SettingCheckbox",t._b({on:{change:t.storeChange}},"SettingCheckbox",t.checkboxes.devTools,!1))],1),s("SettingBlock",{attrs:{label:t.t("autoUpdate")}},[s("SettingCheckbox",t._b({on:{change:t.storeChange}},"SettingCheckbox",t.checkboxes.autoUpdate,!1)),s("small",{staticClass:"col-12"},[t._v(t._s(t.t("last_check_at"))+": "+t._s(t.lastUpdateCheckTime))])],1),s("SettingBlock",{attrs:{label:t.t("update_channel")}},[s("SettingSelect",{attrs:{options:t.chanelOptions},model:{value:t.settings.versionChannel,callback:function(e){t.$set(t.settings,"versionChannel",e)},expression:"settings.versionChannel"}}),s("SettingText",t._b({on:{change:t.storeChange}},"SettingText",t.patConfig,!1))],1),s("SettingBlock",{attrs:{label:t.t("trackerService")}},[s("SettingMultiSelect",{attrs:{keyName:"trackerSource",value:t.settings.trackerSource,options:t.trackerOptions},on:{change:t.storeChange}}),s("SettingTextarea",{attrs:{keyName:"trackerList",value:t.settings.trackerList,label:"Trackers"},on:{change:t.storeChange}}),s("div",{staticClass:"col-12 tracker-links text-page q-mt-sm"},[s("span",[t._v(t._s(t.t("recommendUse"))+":")]),s("a",{attrs:{href:"https://github.com/ngosang/trackerslist",target:"_blank"}},[t._v("ngosang/trackerslist")]),s("a",{attrs:{href:"https://github.com/XIU2/TrackersListCollection",target:"_blank"}},[t._v("XIU2/TrackersListCollection")])]),s("SettingCheckbox",t._b({on:{change:t.storeChange}},"SettingCheckbox",t.checkboxes.autoUpdateTrackers,!1)),s("alphabiz-button",{staticClass:"q-mt-sm",attrs:{color:"primary",label:t.t("manualUpdateTracker")},on:{click:t.updateTrackers}}),s("small",{staticClass:"col-12 q-mt-sm"},[t._v(t._s(t.t("last_check_at"))+": "+t._s(t.lastUpdateTrackerTime))])],1),s("SettingBlock",{attrs:{label:t.t("listenPort")}},[s("SettingNumber",t._b({on:{change:t.storeChange}},"SettingNumber",t.ports.BTListenPort,!1)),s("SettingNumber",t._b({on:{change:t.storeChange}},"SettingNumber",t.ports.DHTListenPort,!1))],1),s("SettingBlock",{attrs:{label:t.t("downloadAgreement")}},[s("div",{staticClass:"col-12 q-mt-sm"},[t._v(t._s(t.t("setDefaultClientForFollowingProtocols")))]),s("SettingCheckbox",t._b({on:{change:t.storeChange}},"SettingCheckbox",t.checkboxes.magnetUrl,!1)),t.isWindows?[s("SettingCheckbox",t._b({on:{change:t.storeChange}},"SettingCheckbox",t.checkboxes.torrentFile,!1)),s("SettingCheckbox",t._b({on:{change:t.storeChange}},"SettingCheckbox",t.checkboxes.videoFile,!1)),s("SettingCheckbox",t._b({on:{change:t.storeChange}},"SettingCheckbox",t.checkboxes.audioFile,!1))]:t._e()],2),s("SettingFooter",{attrs:{disable:!t.changed,loading:t.loading},on:{submit:t.onSubmit,discard:t.onDiscard,reset:t.onReset}})],1)},a=[],i=s("1b40"),r=s("2d04"),l=s("0613"),o=s("8847");const c="https://raw.githubusercontent.com/ngosang/trackerslist/master/trackers_best.txt",u="https://raw.githubusercontent.com/ngosang/trackerslist/master/trackers_best_ip.txt",h="https://raw.githubusercontent.com/ngosang/trackerslist/master/trackers_all.txt",g="https://raw.githubusercontent.com/ngosang/trackerslist/master/trackers_all_ip.txt",d="https://cdn.jsdelivr.net/gh/ngosang/trackerslist/trackers_best.txt",b="https://cdn.jsdelivr.net/gh/ngosang/trackerslist/trackers_best_ip.txt",p="https://cdn.jsdelivr.net/gh/ngosang/trackerslist/trackers_all.txt",m="https://cdn.jsdelivr.net/gh/ngosang/trackerslist/trackers_all_ip.txt",v="https://raw.githubusercontent.com/XIU2/TrackersListCollection/master/best.txt",f="https://raw.githubusercontent.com/XIU2/TrackersListCollection/master/all.txt",k="https://raw.githubusercontent.com/XIU2/TrackersListCollection/master/http.txt",_="https://cdn.jsdelivr.net/gh/XIU2/TrackersListCollection/best.txt",C="https://cdn.jsdelivr.net/gh/XIU2/TrackersListCollection/all.txt",x="https://cdn.jsdelivr.net/gh/XIU2/TrackersListCollection/http.txt",y=[{label:"ngosang/trackerslist",options:[{value:c,label:"ngosang_best",cdn:!1},{value:u,label:"ngosang_best_ip",cdn:!1},{value:h,label:"ngosang_all",cdn:!1},{value:g,label:"ngosang_all_ip",cdn:!1},{value:d,label:"ngosang_best",cdn:!0},{value:b,label:"ngosang_best_ip",cdn:!0},{value:p,label:"ngosang_all",cdn:!0},{value:m,label:"ngosang_all_ip",cdn:!0}]},{label:"XIU2/TrackersListCollection",options:[{value:v,label:"xiu2_best",cdn:!1},{value:f,label:"xiu2_all",cdn:!1},{value:k,label:"xiu2_http",cdn:!1},{value:_,label:"xiu2_best",cdn:!0},{value:C,label:"xiu2_all",cdn:!0},{value:x,label:"xiu2_http",cdn:!0}]}];var S=s("0967"),T=s("0c6d"),w=s("e061"),N=s("cdb1"),U=s("9384"),q=s("2e92"),O=s("284d"),j=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-12 row"},[s("q-input",{staticClass:"setting-text-input q-mt-sm",attrs:{hint:t.label,type:"text",dense:"",outlined:""},nativeOn:{paste:function(t){t.stopPropagation()}},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1)},L=[],$={props:{value:String,keyName:String,label:String},computed:{text:{get(){return this.value},set(t){this.onChange(t)}}},methods:{onChange(t){this.$emit("change",this.keyName,t)}}},P=$,D=(s("28b2"),s("2877")),B=s("27f9"),F=s("eebe"),A=s.n(F),Q=Object(D["a"])(P,j,L,!1,null,"188fdf7a",null),I=Q.exports;A()(Q,"components",{QInput:B["a"]});var R=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-12 row q-mt-sm"},[s("div",{staticClass:"col-12 q-ml-sm"},[t._v(t._s(t.label))]),s("q-input",{staticClass:"setting-textarea-input",attrs:{outlined:"",type:"textarea",rows:"5"},nativeOn:{paste:function(t){t.preventDefault()}},model:{value:t.texts,callback:function(e){t.texts=e},expression:"texts"}})],1)},E=[],M={props:{value:Array,label:String,keyName:String},computed:{texts:{get(){return this.value.join("\n")},set(t){this.onChange(t.split("\n"))}}},methods:{onChange(t){this.$emit("change",this.keyName,t)}}},X=M,V=(s("d71a"),s("6bad"),s("8572")),z=Object(D["a"])(X,R,E,!1,null,"1187b53c",null),H=z.exports;A()(z,"components",{QInput:B["a"],QField:V["a"]});var J=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-12 q-mt-sm"},[s("q-select",{staticClass:"select-multi-input",attrs:{value:t.selected,options:t.options,outlined:"",dense:"",multiple:"","use-chips":"","use-input":""},on:{input:t.onChange}})],1)},W=[],G={props:{value:Array,options:Array,keyName:String},computed:{selected:{get(){return this.value},set(t){this.onChange(t)}}},methods:{onChange(t){this.$emit("change",this.keyName,t)}}},K=G,Y=(s("1a23"),s("ddd8")),Z=Object(D["a"])(K,J,W,!1,null,"31302aa2",null),tt=Z.exports;A()(Z,"components",{QSelect:Y["a"]});var et=function(t,e,s,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,s):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(t,e,s,n);else for(var l=t.length-1;l>=0;l--)(a=t[l])&&(r=(i<3?a(r):i>3?a(e,s,r):a(e,s))||r);return i>3&&r&&Object.defineProperty(e,s,r),r},st=function(t,e,s,n){function a(t){return t instanceof s?t:new s((function(e){e(t)}))}return new(s||(s=Promise))((function(s,i){function r(t){try{o(n.next(t))}catch(e){i(e)}}function l(t){try{o(n["throw"](t))}catch(e){i(e)}}function o(t){t.done?s(t.value):a(t.value).then(r,l)}o((n=n.apply(t,e||[])).next())}))};const nt=y.reduce(((t,e)=>{const s=e.options;return t.push(...s),t}),[]);let at=class extends r["a"]{constructor(){super(...arguments),this.trackerOptions=nt,this.isWindows=!!S["b"].is.win,this.chanelOptions=[{label:"stable",value:"stable"},{label:"nightly",value:"nightly"},{label:"internal",value:"internal"}]}get showDevOptions(){return!l["a"].getters.settings.disableDevTools}get lastUpdateCheckTime(){return new Date(l["a"].getters.settings.lastUpdateCheckTime).toLocaleString(o["b"].locale)}get lastUpdateTrackerTime(){return new Date(l["a"].getters.settings.trackerLastUpdateTime).toLocaleString(o["b"].locale)}get patConfig(){return{label:"Github PAT (internal)",value:this.settings.githubPAT,keyName:"githubPAT"}}get checkboxes(){return{devTools:{label:this.t("disable"),value:this.settings.disableDevTools,keyName:"disableDevTools"},autoUpdate:{label:this.t("autoCheckUpdate"),value:this.settings.autoCheckUpdate,keyName:"autoCheckUpdate"},autoUpdateTrackers:{label:this.t("autoUpdateTrackerServiceList"),value:this.settings.autoUpdateTrackerServiceList,keyName:"autoUpdateTrackerServiceList"},magnetUrl:{label:this.t("magnetUrl")+" [ magnet: ]",value:this.settings.bindMagnetUrl,keyName:"bindMagnetUrl"},torrentFile:{label:this.t("torrent_file")+" [ .torrent] ",value:this.settings.bindTorrentFile,keyName:"bindTorrentFile"},videoFile:{label:this.t("video_file"),value:this.settings.bindVideoFile,keyName:"bindVideoFile"},audioFile:{label:this.t("audio_file"),value:this.settings.bindAudioFile,keyName:"bindAudioFile"}}}get ports(){const t=t=>!(isNaN(t)||t<17e3||t>22e3)||this.t("range_error",[17e3,22e3]);return{BTListenPort:{label:this.t("BTlistenPort"),value:this.settings.BTlistenPort,keyName:"BTlistenPort",rules:[t],dice:[17e3,22e3]},DHTListenPort:{label:this.t("DHTlistenPort"),value:this.settings.DHTlistenPort,keyName:"DHTlistenPort",rules:[t],dice:[17e3,22e3]}}}updateTrackers(){return st(this,void 0,void 0,(function*(){const t=yield Object(T["a"])("update_tracker",this.settings.trackerSource);if(t&&t.data){const e=t.data;e.length?(this.storeChange("trackerList",e),t.time&&this.storeChange("trackerLastUpdateTime",t.time),this.notify(this.t("manualUpdateSuccess"))):this.notify(this.t("update_failed"))}}))}};at=et([Object(i["a"])({components:{SettingBlock:w["a"],SettingCheckbox:U["a"],SettingSelect:q["a"],SettingNumber:O["a"],SettingText:I,SettingTextarea:H,SettingMultiSelect:tt,SettingFooter:N["a"]}})],at);var it=at,rt=it,lt=(s("6b28"),s("9989")),ot=s("b498"),ct=Object(D["a"])(rt,n,a,!1,null,"78cfc4ec",null);e["default"]=ct.exports;A()(ct,"components",{QPage:lt["a"],QColor:ot["a"]})},cdb1:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-footer",{attrs:{bordered:""}},[s("div",{directives:[{name:"show",rawName:"v-show",value:!t.disable,expression:"!disable"}],staticClass:"row q-pa-sm"},[s("alphabiz-button",{staticClass:"q-mx-xs",attrs:{color:"primary",label:t.$t("submit"),"on-click":t.submit}}),s("alphabiz-button",{staticClass:"q-mx-xs",attrs:{color:"general",label:t.$t("discard")},on:{click:t.discard}}),s("q-space"),s("alphabiz-button",{staticClass:"q-mx-xs",attrs:{color:"negative",label:t.$t("reset")},on:{click:t.reset}})],1)])},a=[],i={props:{disable:Boolean},methods:{submit(){this.$emit("submit")},discard(){this.$emit("discard")},reset(){this.$emit("reset")}}},r=i,l=s("2877"),o=s("7ff0"),c=s("2c91"),u=s("eebe"),h=s.n(u),g=Object(l["a"])(r,n,a,!1,null,null,null);e["a"]=g.exports;h()(g,"components",{QFooter:o["a"],QSpace:c["a"]})},d71a:function(t,e,s){"use strict";s("76d3")},e061:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"setting-block row q-mt-md q-mb-lg"},[s("div",{staticClass:"setting-label col-4 q-pt-sm"},[s("span",{staticClass:"q-mr-md"},[t._v(t._s(t.label))])]),s("div",{staticClass:"setting-content col row"},[t._t("default")],2)])},a=[],i={props:{label:String}},r=i,l=(s("0204"),s("2877")),o=Object(l["a"])(r,n,a,!1,null,"4521552c",null);e["a"]=o.exports},e9df:function(t,e,s){},ea55:function(t,e,s){}}]);